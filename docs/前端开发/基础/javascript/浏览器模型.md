# 浏览器模型


## 浏览器环境
JavaScript是浏览器的内置脚本语言。

也就是说，浏览器内置了JavaScript引擎，并提供了各种接口，让JavaScript脚本可以控制浏览器的各种功能。

### 代码嵌入网页

#### `<script>`元素直接嵌入代码
```js
<script>
  var x = 1 + 5;
  console.log(x);
</script>
```

有一个type属性，来指定脚本类型，有两个值

1、`text/javascript`：默认值，适用于老式浏览器

2、`application/javascript`：较新的浏览器

如果取其他值，浏览器不认识，就不会执行其中的代码

#### `<script>`标签加载外部脚本
```js
<script src="https://www.example.com/script.js"></script>
```

如果脚本文件使用了非英语字符，应该注明字符的编码
```js
<script charset="utf-8" src="https://www.example.com/script.js"></script>
```

为了防止攻击者篡改外部脚本，script标签允许设置一个integrity属性，写入该外部脚本的 Hash 签名，用来验证脚本的一致性。
```js
<script src="/assets/application.js"
  integrity="sha256-TvVUHzSfftWg1rcfL6TIJ0XKEGrgLyEq6lEpcmrG9qs=">
</script>
```

#### 事件属性
网页元素的事件属性如onclike，可以写入JavaScript代码
```js
<button id="myBtn" onclick="console.log(this.id)">点击</button>
```

#### URL协议
URL支持`javascript:`协议，即在URL的位置写入代码，使用这个URL的时候就会执行JavaScript带啊吗

```js
<a href="javascript:console.log('Hello')">点击</a>
```
浏览器的地址栏也可以执行`javascript:`协议。将`javascript:console.log('Hello')`放入地址栏，按回车键也会执行这段代码。

### 浏览器组成

浏览器的核心是两部分：渲染引擎和JavaScript解释器（又叫JavaScript引擎）

渲染引擎的主要作用是，将网页代码渲染为用户视觉可以感知的平面文档

JavaScript引起的主要作用是，读取网页中的JavaScript代码，对其处理后运行


## window对象
当前的浏览器窗口，是当前页面的顶层对象，即最高一层的对象，所有其他对象都是它的下属

## Navigator对象，Screen对象
`window.navigator`属性指向一个包含浏览器和系统信息的Navigator对象，脚本通过这个属性了解用户的环境信息。

Screen对象表示当前窗口所在的屏幕，提供显示设备的信息。`window.screen`属性指向这个对象。

## Cookie
Cookie 是服务器保存在浏览器的一小段文本信息，一般大小不能超过4KB。浏览器每次向服务器发出请求，就会自动附上这段信息。

## XMLHttpRequest对象
1999年，微软公司发布 IE 浏览器5.0版，第一次引入新功能：允许 JavaScript 脚本向服务器发起 HTTP 请求。

这个功能当时并没有引起注意，直到2004年 Gmail 发布和2005年 Google Map 发布，才引起广泛重视。

2005年2月，AJAX 这个词第一次正式提出，它是 `Asynchronous JavaScript and XML` 的缩写，指的是通过 JavaScript 的异步通信，从服务器获取 XML 文档从中提取数据，再更新当前网页的对应部分，而不用刷新整个网页。

后来，AJAX 这个词就成为 JavaScript 脚本发起 HTTP 通信的代名词，也就是说，只要用脚本发起通信，就可以叫做 AJAX 通信。

W3C 也在2006年发布了它的国际标准。

具体来说，AJAX 包括以下几个步骤。

1、创建 XMLHttpRequest 实例

2、发出 HTTP 请求

3、接收服务器传回的数据

4、更新网页数据

概括起来，就是一句话，`AJAX 通过原生的XMLHttpRequest对象发出 HTTP 请求，得到服务器返回的数据后，再进行处理`。现在，服务器返回的都是 JSON 格式的数据，XML 格式已经过时了，但是 AJAX 这个名字已经成了一个通用名词，字面含义已经消失了。


## 同源限制
同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。

## CORS通信


## Storage接口


## History对象


## Location对象，URL对象，URISearchParams对象


## ArrayBuffer对象，Blob对象


## File对象，FileList对象，FileReader对象


## 表单，FormData对象


## IndexedDB API


## Web Worker








