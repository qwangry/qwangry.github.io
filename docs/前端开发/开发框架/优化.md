# 优化

## 路由懒加载

路由懒加载就是只加载点击的那个模块，按需加载路由对应的资源

原理：利用了 ES6 的 import()函数动态地加载模块。将路由相关的组件，不再直接导入，而是改写成异步组件的写法，只有当函数被调用的时候，才去加载对应的组件内容。

这样可以避免在初次加载应用时加载过多的组件代码，从而提高应用的性能和体验。

```js
import VueRouter from 'vue-router'

Vue.use(VueRouter)
const router = new VueRouter({
 routes: [
    { path: '/login', component: () => import('@/views/login/index.vue') },
    { path: '/home',  component: () => import('@/views/home/home.vue') }
  ]

export default router
```

import()函数：一般来说，当在代码中使用 import()函数时，打包攻击会将对应的模块代码单独分割出来，并生成一个独立的 chunk(代码块)文件。这些 chunk 可以是 JS, CSS 或者其他资源类型，根据具体的配置和需求进行优化。

当页面加载时，只会加载当前页面所需的主 chunk 文件，而其他 chunk 文件则会在需要时在进行异步加载。

当 import()函数被调用时，相应的 chunk 文件会被下载并解析，从而完成加载模块的过程

实现：路由懒加载一般是由前端框架或其他库来实现的，打包工具会根据配置来生成对应的 chunk 文件，因此，路由懒加载既涉及前端框架或库的使用，也与打包工具和优化密切相关。

## 图片懒加载

对于图片量比较大的首页，用户打开页面后，只需要呈现出屏幕可视区域内的图片，当用户滑动页面时，再去加载出现在屏幕内的图片，以优化图片的加载效果

### 实现原理

由于浏览器会自动对页面中的 img 标签的 src 属性发送请求并下载图片，可以通过 html5 自定义属性 data-xxx 先暂存 src 的值，然后在图片出现在屏幕可视区域的时候，再将 data-xxx 的值重新赋值到 img 的 src 属性即可

```js
<img src="" alt="" data-src="./images/1.jpg">
<img src="" alt="" data-src="./images/2.jpg">
```
