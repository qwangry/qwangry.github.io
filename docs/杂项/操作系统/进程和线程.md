# 进程和线程

## 进程间通信

进程间通信是指在操作系统中，多个进程之间为了完成任务需要进行数据交换或协同工作的技术

常见的方式有：

1、管道Pipe

2、消息队列

3、共享内存（是最快的进程间通信方式）

> 为了防止数据竞争，需要配合其他同步机制，如信号量或互斥锁

4、信号量

是一种同步机制，可以用于进程间的写作与同步

5、信号

是一种比较简单的通信方式，用于通知进程某些事件的发生，通常用于中断进程的执行，或者进程之间传递一些控制信息

6、套接字socket

7、内存映射Memory-Mapped Files

通过将一个文件映射到进程的地址空间中，多个进程可以通过映射到同一文件的方式来共享数据

8、消息缓冲区

9、文件系统

通过读写同一文件来实现通信

10、远程过程调用RPC

允许进程通过调用远程进程的函数来实现通信，抽象出通信细节，让进程之间的通信看起来像是本地函数调用

总结：

- `管道和消息队列`适合简单的数据传输。

- `共享内存`适合大量数据的快速交换，但需要同步机制保证一致性。

- `信号量`适合同步和协调进程操作。

- `套接字`则适合分布式系统或需要网络通信的场景。

## 进程调度策略

### 先来先服务FCFS，First-Come First-Served

按照进程到达的先后顺序进行调度，先到的进程先执行，直到该进程结束或阻塞后，再调度下一个进程

优点：实现简单，容易理解

缺点：不能有效处理长短作业混合的情况，容易导致`长作业占用资源过多`，从而引发饥饿问题（短作业等待过长）

### 短作业优先SJF，Shortest Job First

每次调度优先选择预计运行时间最短的进程进行执行

优点：能够最小化平均等待时间，适合短作业密集的场景

缺点：难以准确预测作业长度，且可能导致长作业饥饿问题

### 最高相应比优先调度HRRN，Highest Response Ratio Next

综合考虑等待时间和作业长度，优先调度响应比最高的进程，响应比计算公式为：`(等待时间+运行时间)/运行时间`

优点：避免了饥饿问题，兼顾长短作业，动态调整进程优先级

缺点：实现较为复杂，适用场景相对有限

### 时间片轮转调度RR，Round Robin

将CPU时间片分成固定长度的时间片，每个进程在一个时间片内执行。时间片到期后，如果进程未完成，则放到队列尾部，等待下一轮调度

优点：对所有进程公平，适合交互式系统，确保每个进程都能得到处理

缺点：如果时间片过长，可能退化为FCFS；如果时间片过短，则调度开销增加，影响系统效率

### 优先级调度Priority Scheduling

根据进程的优先级进行调度，优先级高的进程先执行。优先级可以是静态的，也可以动态变化。

优点：灵活性高，可以满足不同进程的响应需求

缺点：可能会导致优先级反转（低优先级的进程长期等待），从而引发饥饿问题

### 多级反馈队列Multilevel Feedback Queue

多个调度队列，每个队列有不同的优先级和时间片，进程可以根据其执行时间和响应情况在不同队列之间动态调整。例如，刚到达的进程进入高优先级队列，如果适用的CPU时间过多，则逐渐降到低优先级队列

优点：兼顾短作业和长作业的需求，对交互式和批处理系统都有较好表现

缺点：实现复杂，调优难度大

### 抢占式调度Preemptive Scheduling

运行操作系统在某些条件下中断当前进程的执行，并将CPU分配给另一个进程，这种调度策略可以和其他调度算法结合适用，例如优先级调度和时间片轮转调度

优点：可以更好地响应高优先级进程，确保系统的实时性

缺点：增加了调度开销，可能影响系统效率

### 实时调度Real-Time Scheduling

用于实时系统，要求进程必须在严格的时间限制内完成，分为硬实时（必须在截至时间内完成）和软实时（尽量在截至时间内完成）

优点：能够满足关键任务的时间约束

缺点：调度复杂，通常需要硬件和软件的支持

