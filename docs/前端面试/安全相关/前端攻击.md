# 前端攻击

## 跨站脚本XSS

> 注入攻击，将恶意脚本注入到网页中，欺骗用户浏览器执行，从而窃取用户敏感信息或破坏网站

### 攻击方式

1、反射型：将脚本注入用户提交的数据中，如评论表单、搜索表单等。当用户提交数据时，恶意脚本会被原样反射回用户浏览器，并被执行。

2、存储型：脚本存储在服务器端，例如将恶意脚本注入到数据库中。当用户访问包含恶意脚本的页面时，恶意脚本会被浏览器执行。

3、DOM 型：利用浏览器 DOM 的漏洞来执行恶意脚本。例如，攻击者可以利用 `<script>` 标签的 onerror 属性来执行恶意脚本。


### 防御措施

1、对用户输入进行转义和过滤

2、使用 HTTPOnly Cookie

3、使用 Content Security Policy (CSP)

4、使用前端常用框架 (如Vue、React等)：这些框架模板字符一般都经过转义和过滤,具有一定的安全性 


##  依赖库风险

> 前端网站通常会依赖很多的第三方库和组件来实现各种功能。如果这些依赖库存在漏洞，攻击者可以利用这些漏洞来攻击网站。

### 远程代码执行RCE

利用依赖库漏洞在受害者的浏览器或服务器上执行任意代码。

### 跨站请求伪造CSRF
利用依赖库漏洞伪造用户请求，诱骗用户执行非预期的操作。

### 防御措施

1、使用经过安全审计的依赖库

2、定期更新依赖库，及时修复已知的安全漏洞

3、尽量减少对第三方库的依赖

## 跨站请求伪造 (CSRF)

> 攻击者诱骗用户在其`已登录的应用程序中执行非预期的操作`，例如`转账、修改个人信息`等。CSRF 攻击通常利用用户的信任来实施，因为用户在自己的浏览器中看到的是来自可信网站的请求，而没有意识到该请求实际上是被攻击者伪造的。

### 攻击方式

1、利用`表单`或者`链接跳转`：攻击者会构造一个恶意表单或者链接，诱骗用户点击。当用户点击表单时，会向受害者的应用程序发送一个 POST 请求或者GET 请求，其中包含攻击者想要执行的操作。

2、利用图片请求: 攻击者利用浏览器对图片的自动请求特性，构造一个包含恶意请求的图片。当用户浏览包含恶意图片的页面时，浏览器会自动向受害者的应用程序发送请求，其中包含攻击者想要执行的操作。


### 防御措施

1、在表单中添加 CSRF 令牌：在表单中添加一个随机生成的 CSRF 令牌，并将其作为隐藏域提交给服务器。服务器端在验证用户请求时，会检查 CSRF 令牌的有效性。

2、使用 HTTP Referer 头：使用 HTTP Referer 头来检查请求来源，防止跨域请求。

3、使用 SameSite Cookie 属性: 将 Cookie 的 SameSite 属性设置为 Strict，可以防止 CSRF 攻击。

> `SameSite=Strict` 的设置会让 Cookie 仅在用户访问同一网站时才会发送，避免在跨站点请求中泄露 Cookie

##  点击劫持 (Clickjacking)

> 是一种欺骗攻击，攻击者在可信赖的页面上使用透明或半透明的覆盖层来欺骗用户点击他们所看到的以外的内容，例如按钮或链接。当用户点击覆盖层时，实际上点击的是攻击者精心设计的恶意内容，例如钓鱼网站或下载恶意软件的链接。

### 攻击方式

1、利用透明层：在可信赖页面上使用透明层覆盖真正的链接或按钮。当用户点击页面时，实际上点击的是透明层中的恶意内容。

2、利用iframe：在可信赖的页面中嵌入一个iframe，iframe的内容是一个精心设计的恶意页面。当用户点击页面时，实际上点击的是iframe中的恶意内容。

3、利用CSS定位：利用CSS定位技术将恶意内容定位在可信赖的页面之上。当用户点击页面时，实际上点击的是恶意内容。

### 防御措施

1、使用 X-Frame-Options 头：在服务器端设置 X-Frame-Options 头，禁止其他网站嵌入本网站的页面。

2、使用 Content Security Policy (CSP)：CSP 是一种通过配置浏览器安全机制来限制网页中可执行内容的安全技术。

3、避免使用透明层：尽量避免在页面中使用透明层，如果必须使用，则需要仔细测试并确保透明层不会被攻击者利用。

## 内容交付网络 (CDN) 劫持

> 是指攻击者劫持 CDN 节点，修改 CDN 上的库文件，在其中注入恶意代码，进而使应用程序的用户下载到这些恶意代码。CDN 劫持攻击通常利用 CDN 节点的安全漏洞或配置错误来实施。

### 攻击方式

1、利用 CDN 节点漏洞: 攻击者利用 CDN 节点的漏洞，例如 SQL 注入、远程代码执行 (RCE) 等，获取对 CDN 节点的控制权。

2、利用 CDN 配置错误: 攻击者利用 CDN 配置错误，例如未启用 SSL/TLS 加密、未配置访问控制等，将恶意代码注入到 CDN 节点上。


### 防御措施

1、使用 HTTPS 加密: 在 CDN 节点和用户浏览器之间使用 HTTPS 加密，可以防止攻击者窃取或篡改传输数据。

2、使用内容完整性验证 (CV): 使用 CV 技术来确保 CDN 内容的完整性，防止恶意代码被注入。

3、定期监控 CDN 节点: 定期监控 CDN 节点的安全状况，及时发现并修复安全漏洞。

4、选择可靠的 CDN 服务商: 选择可靠的 CDN 服务商，可以降低被攻击的风险。


## HTTPS 降级

> 指攻击者诱使用户使用不安全的 HTTP 连接访问应用程序，从而窃取用户敏感信息。HTTPS 是一种安全协议，可以对传输数据进行加密，防止攻击者窃取或篡改。然而，一些旧的浏览器或设备可能不支持 HTTPS，或者用户可能被攻击者诱骗使用不安全的 HTTP 连接。

### 攻击方式
1、利用社会工程: 攻击者通过社交工程手段，例如钓鱼网站、虚假信息等，诱骗用户点击不安全的链接。

2、利用浏览器漏洞: 攻击者利用浏览器漏洞，将用户重定向到不安全的 HTTP 连接。

3、利用中间人攻击: 攻击者在用户和服务器之间进行拦截，将用户连接降级为不安全的 HTTP 连接。

### 防御措施

1、强制使用 HTTPS: 在服务器端强制使用 HTTPS 连接，并禁止 HTTP 连接。

2、使用 HSTS 头: 在服务器端设置 HSTS 头，告诉浏览器始终使用 HTTPS 连接访问该网站。

## 中间人攻击

> 是攻击者在用户和服务器之间进行拦截，窃取或篡改通信内容。中间人攻击通常利用不安全的网络连接或 Wi-Fi 热点来实施。

### 攻击方式
1、利用不安全的网络连接: 攻击者建立一个伪造的 Wi-Fi 热点，并诱骗用户连接。当用户通过伪造的 Wi-Fi 热点访问网站时，攻击者可以窃取用户发送到服务器的 Cookie、表单数据、登录凭证等敏感信息。

2、利用 SSL/TLS 漏洞: 攻击者利用 SSL/TLS 协议的漏洞，例如心脏出血漏洞、POODLE 漏洞等，解密用户和服务器之间的通信内容。

### 防御措施
1、使用 HTTPS 加密: 在服务器端和用户浏览器之间使用 HTTPS 加密，可以防止攻击者窃取或篡改传输数据。

2、使用公钥密码认证: 使用公钥密码认证可以确保通信双方身份的真实性，防止攻击者冒充服务器或用户进行攻击。

3、安装杀毒软件和防火墙: 安装杀毒软件和防火墙可以帮助防御一些常见的中间人攻击。

## 参考
[https://mp.weixin.qq.com/s/LeYx3lHtiqhkJ1LPNq8EIQ](https://mp.weixin.qq.com/s/LeYx3lHtiqhkJ1LPNq8EIQ)